- name: Habilitar addon ingress de microk8s
  ansible.builtin.command: "/snap/bin/microk8s enable  ingress"
  register: enable_addons
  changed_when: "'enabled' in enable_addons.stdout"

- name: Habilitar addon metallb de microk8s
  ansible.builtin.command: "/snap/bin/microk8s enable metallb:{{metallb_ip_range}}"
  register: enable_metallb
  changed_when: "'enabled' in enable_metallb.stdout"

- name: Habilitar el addon de storage para las bases de datos
  ansible.builtin.command: "/snap/bin/microk8s enable hostpath-storage"
  register: enable_hostpath-storage
  changed_when: "'enabled' in enable_hostpath-storage.stdout"

- name: Mostrar resultado de habilitar addons
  ansible.builtin.debug:
    msg: "{{ enable_addons.stdout }} {{ enable_metallb.stdout }}"
